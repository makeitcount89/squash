<!DOCTYPE html>
<html>
<head>
    <title>Simple JavaScript Metronome</title>
</head>
<body>
    <h1>Metronome</h1>
    <button id="startStop">Start</button>
    <input type="number" id="bpm" placeholder="BPM">
    <p>Current BPM: <span id="currentBpm">0</span></p>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.15/Tone.js"></script>
    <script>
        const startStopButton = document.getElementById('startStop');
        const bpmInput = document.getElementById('bpm');
        const currentBpmDisplay = document.getElementById('currentBpm');

        let isPlaying = false;
        let toneTransport = Tone.Transport;

        startStopButton.addEventListener('click', () => {
            if (!isPlaying) {
                const bpm = parseFloat(bpmInput.value);
                if (!isNaN(bpm) && bpm > 0) {
                    toneTransport.bpm.value = bpm;
                    toneTransport.start();
                    isPlaying = true;
                    startStopButton.textContent = 'Stop';
                }
            } else {
                toneTransport.stop();
                isPlaying = false;
                startStopButton.textContent = 'Start';
            }
        });

        // Update the current BPM display
        toneTransport.bpm.value = 120; // Default BPM
        toneTransport.scheduleRepeat((time) => {
            currentBpmDisplay.textContent = toneTransport.bpm.value.toFixed(2);
        }, '16n');

        // Handle the input change
        bpmInput.addEventListener('input', () => {
            const newBpm = parseFloat(bpmInput.value);
            if (!isNaN(newBpm) && newBpm > 0) {
                toneTransport.bpm.value = newBpm;
            }
        });
    </script>
</body>
</html>
