<!DOCTYPE html>
<html>
<head>
  <title>Gauge Chart and Guitar Tuner</title>
  <script src="https://cdn.rawgit.com/bernii/gauge.js/master/dist/gauge.min.js"></script>
</head>
<body>
  <!-- Gauge Chart -->
  <canvas id="gauge"></canvas>

  <script>
    var opts = {
      angle: 0,
      lineWidth: 0.2,
      radiusScale: 1,
      pointer: {
        length: 0.6,
        strokeWidth: 0.035,
        color: '#000000'
      },
      staticLabels: {
        font: '10px sans-serif',
        labels: [0, 50, 100],
        fractionDigits: 0
      },
      limitMax: false,
      limitMin: false,
      colorStart: '#6F6EA0',
      colorStop: '#C0C0DB',
      strokeColor: '#E0E0F0',
      generateGradient: true
    };
    var target = document.getElementById('gauge');
    var gauge = new Gauge(target).setOptions(opts);

    gauge.maxValue = 100;
    gauge.setMinValue(0);
    gauge.animationSpeed = 32;

    // Set the value of the gauge (change this value as needed)
    gauge.set(75);

    // Function to set the gauge needle angle based on the note being in tune, flat, or sharp
    function setGaugeNeedleAngle(noteName) {
      if (noteName.includes("in-tune")) {
        gauge.set(50); // Point vertically (in tune)
      } else if (noteName.includes("very flat")) {
        gauge.set(10); // Point 80 degrees left (very flat)
      } else if (noteName.includes("flat")) {
        gauge.set(25); // Point 45 degrees left (a bit flat)
      } else if (noteName.includes("sharp")) {
        gauge.set(75); // Point 45 degrees right (a bit sharp)
      } else if (noteName.includes("a bit sharp")) {
        gauge.set(90); // Point 80 degrees right (a bit sharp)
      } else {
        gauge.set(50);
      }
    }

    // Call the function to set the initial gauge needle angle
    setGaugeNeedleAngle("in-tune"); // You can change this to reflect the actual note status
  </script>

  <!-- Guitar Tuner -->
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }
    .indicator-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .indicator {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: none;
    }
    .flat, .in-tune, .sharp {
      font-size: 2em;
    }
    .flat {
      background-color: red;
    }
    .in-tune {
      background-color: green;
    }
    .sharp {
      background-color: red;
    }
  </style>

  <script>
    var C2 = 65.41; // C2 note, in Hz
    var notes = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"];
    var test_frequencies = [];
    for (var i = 0; i < 30; i++) {
      var note_frequency = C2 * Math.pow(2, i / 12);
      var note_name = notes[i % 12];
      var note = { "frequency": note_frequency, "name": note_name };
      var just_above = { "frequency": note_frequency * Math.pow(2, 1 / 48), "name": note_name + " (a bit sharp)" };
      var very_flat = { "frequency": note_frequency * Math.pow(2, -1 / 36), "name": note_name + " (very flat)" };
      var flat = { "frequency": note_frequency * Math.pow(2, -1 / 24), "name": note_name + " (flat)" };
      var just_below = { "frequency": note_frequency * Math.pow(2, -1 / 48), "name": note_name + " (a bit flat)" };
      test_frequencies = test_frequencies.concat([very_flat, flat, just_below, note, just_above]);
    }

    // Rest of your code remains the same
  </script>

  <h1 id="note-name" style="font-size: 6em;"></h1>
  <p>
    <span style="font-size: 2em;">frequency (Hz):</span>
    <span id="frequency" style="font-size: 2em;"></span>
  </p>
  <div class="indicator-container">
    <div id="flat-indicator" class="indicator flat"></div>
    <div id="in-tune-indicator" class="indicator in-tune"></div>
    <div id="sharp-indicator" class="indicator sharp"></div>
  </div>
</body>
</html>
